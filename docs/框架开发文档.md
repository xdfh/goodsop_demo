# Goodsop项目框架开发文档

## 1. 项目概述

本项目使用Spring Boot 3.1.5和JDK 17构建RESTful API服务，采用多模块架构设计，集成MyBatis-Plus和PostgreSQL数据库，旨在提供高性能、可扩展的业务解决方案。

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 2. 技术栈

| 技术 | 版本 | 说明 |
|------|------|------|
| Spring Boot | 3.1.5 | 基础框架 |
| JDK | 17 | Java版本 |
| MyBatis-Plus | 最新稳定版 | 持久层框架 |
| PostgreSQL | 1.17 | 数据库 |
| Knife4j | 最新版 | 接口文档工具 |
| Lombok | 最新版 | 代码简化工具 |
| JUnit 5 | 最新版 | 测试框架 |
| Mockito | 最新版 | 测试工具 |
| SonarQube | 最新版 | 代码质量管理 |
| SLF4J | 最新版 | 日志框架 |

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 3. 环境配置

### 3.1 开发环境
- 操作系统：Windows 10
- 编码：UTF-8
- JDK：17
- Maven：系统配置
- Git：系统配置

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 3.2 数据库配置
- 数据库：PostgreSQL 1.17
- 主机：192.168.1.30
- 端口：65432
- 数据库名：mydb
- 用户名：post
- 密码：admin@2025

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 4. 项目架构

### 4.1 多模块结构

```
goodsop
├── pom.xml                    # 父模块，管理依赖版本
├── goodsop-common             # 公共模块
│   ├── goodsop-common-core    # 核心工具类
│   └── goodsop-common-swagger # 接口文档配置
├── goodsop-config             # 配置模块
│   ├── goodsop-config-dev     # 开发环境配置
│   ├── goodsop-config-test    # 测试环境配置
│   └── goodsop-config-prod    # 生产环境配置
├── goodsop-modules            # 业务模块
│   ├── goodsop-user           # 用户模块
│   ├── goodsop-file           # 文件模块
│   └── goodsop-iot            # IOT模块
└── goodsop-server             # 项目启动模块
```

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 4.2 分层架构
- Controller层：接收请求，参数校验，返回响应
- Service层：业务逻辑处理，事务管理
- Mapper/DAO层：数据访问，与数据库交互
- Entity层：数据库映射实体
- DTO/VO层：数据传输对象和视图对象

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 5. 开发规范

### 5.1 代码规范
- 包名统一为：com.goodsop
- 实体类必须包含Swagger注解（如@ApiModel）
- Service方法必须带@Override注解
- 日志记录统一使用SLF4J
- 统一使用Result<T>封装响应

```java
public class Result<T> {
  private int code;
  private String msg;
  private T data;
}
```

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 5.2 命名规范
- 类名：使用大驼峰命名法，如UserService
- 方法名：使用小驼峰命名法，如getUserById
- 变量名：使用小驼峰命名法，如userId
- 常量名：全大写，单词间用下划线分隔，如MAX_COUNT
- 包名：全小写，如com.goodsop.user

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 6. 模块实现

### 6.1 父模块（pom.xml）

- 配置Spring Boot父依赖（3.2.0）
- 管理各模块共用依赖版本
- 配置构建插件

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.2 公共模块（goodsop-common）

#### 6.2.1 核心工具类（goodsop-common-core）
- 封装通用工具类
- 定义通用异常处理
- 实现Result<T>响应封装

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 6.2.2 接口文档（goodsop-common-swagger）
- 配置Knife4j接口文档
- 实现接口分组管理

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.3 配置模块（goodsop-config）

#### 6.3.1 开发环境配置（goodsop-config-dev）
- 数据库连接配置
- 日志级别配置
- 其他开发环境特定配置

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 6.3.2 测试环境配置（goodsop-config-test）
- 测试环境特定配置

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 6.3.3 生产环境配置（goodsop-config-prod）
- 生产环境特定配置

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.4 用户模块（goodsop-user）
- 创建用户实体类（t_user表）
- 实现用户CRUD接口
- 配置接口文档

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.5 文件模块（goodsop-file）
- 搭建基础框架（暂不开发业务）

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.6 IOT模块（goodsop-iot）
- 搭建基础框架（暂不开发业务）

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 6.7 项目启动模块（goodsop-server）
- 配置项目启动类
- 集成所有模块
- 配置全局异常处理

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 7. 质量保证

### 7.1 单元测试
- 使用JUnit 5编写测试用例
- 使用Mockito模拟外部依赖
- 核心业务方法测试覆盖率达到80%以上

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 7.2 代码质量
- 使用SonarQube进行代码质量管理
- 使用SonarScanner扫描代码质量
- 解决所有Critical和Blocker级别的问题

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 8. 开发计划

### 8.1 第一阶段：框架搭建
- 创建多模块项目结构
- 配置基础依赖
- 实现公共模块

**计划时间：** YYYY-MM-DD 至 YYYY-MM-DD
**实际时间：** YYYY-MM-DD 至 YYYY-MM-DD
**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 8.2 第二阶段：用户模块开发
- 创建数据库表结构
- 实现用户CRUD接口
- 编写单元测试
- 完成接口文档

**计划时间：** YYYY-MM-DD 至 YYYY-MM-DD
**实际时间：** YYYY-MM-DD 至 YYYY-MM-DD
**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 8.3 第三阶段：其他模块搭建
- 搭建文件模块基础框架
- 搭建IOT模块基础框架
- 完善项目启动模块

**计划时间：** YYYY-MM-DD 至 YYYY-MM-DD
**实际时间：** YYYY-MM-DD 至 YYYY-MM-DD
**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 8.4 第四阶段：质量保证
- 编写单元测试
- 进行代码质量扫描
- 解决发现的问题

**计划时间：** YYYY-MM-DD 至 YYYY-MM-DD
**实际时间：** YYYY-MM-DD 至 YYYY-MM-DD
**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 9. 接口设计

### 9.1 用户模块接口

#### 9.1.1 创建用户
- 请求方法：POST
- 请求路径：/api/user
- 请求参数：用户信息
- 响应结果：创建结果

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 9.1.2 查询用户
- 请求方法：GET
- 请求路径：/api/user/{id}
- 请求参数：用户ID
- 响应结果：用户信息

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 9.1.3 更新用户
- 请求方法：PUT
- 请求路径：/api/user/{id}
- 请求参数：用户ID，更新信息
- 响应结果：更新结果

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

#### 9.1.4 删除用户
- 请求方法：DELETE
- 请求路径：/api/user/{id}
- 请求参数：用户ID
- 响应结果：删除结果

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 10. 数据库设计

### 10.1 用户表（t_user）

| 字段名 | 类型 | 说明 | 约束 |
|--------|------|------|------|
| id | bigint | 主键 | PRIMARY KEY |
| username | varchar(50) | 用户名 | NOT NULL, UNIQUE |
| password | varchar(100) | 密码 | NOT NULL |
| email | varchar(100) | 邮箱 | |
| phone | varchar(20) | 手机号 | |
| status | int | 状态（0-禁用，1-启用） | DEFAULT 1 |
| create_time | timestamp | 创建时间 | NOT NULL |
| update_time | timestamp | 更新时间 | NOT NULL |
| create_by | varchar(50) | 创建人 | |
| update_by | varchar(50) | 更新人 | |
| is_deleted | int | 是否删除（0-未删除，1-已删除） | DEFAULT 0 |

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 11. 部署说明

### 11.1 开发环境部署
- 配置JDK 17
- 配置Maven
- 配置PostgreSQL数据库
- 运行应用

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 11.2 测试环境部署
- 配置测试环境
- 打包应用
- 部署应用

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

### 11.3 生产环境部署
- 配置生产环境
- 打包应用
- 部署应用

**开发进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成

## 12. 风险与挑战

| 风险 | 影响 | 应对措施 | 负责人 |
|------|------|----------|--------|
| 技术选型不当 | 高 | 充分调研，选择成熟稳定的技术 | | 
| 需求变更频繁 | 中 | 敏捷开发，保持灵活性 | |
| 开发进度延迟 | 中 | 合理规划，定期检查进度 | |
| 代码质量问题 | 高 | 使用SonarQube监控，遵循开发规范 | |

**风险管理进度：** [ ] 未开始 [ ] 进行中 [ ] 已完成 