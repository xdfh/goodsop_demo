# 框架调整变更记录

## 1. 模块合并

### 1.1 公共模块调整
- 将 `goodsop-common-core` 和 `goodsop-common-swagger` 模块的业务代码迁移到 `goodsop-common` 下
- 移除子模块层级，改为扁平化结构
- 将包结构保持为 `com.goodsop.common`

### 1.2 配置模块调整
- 将 `goodsop-config-dev`、`goodsop-config-test` 和 `goodsop-config-prod` 模块的业务代码迁移到 `goodsop-config` 下
- 通过配置文件区分不同环境，而非通过模块区分
- 使用Spring Boot的多环境配置方式切换不同环境

## 2. 迁移内容

### 2.1 公共模块迁移
1. 目录结构调整：
   - 创建 `goodsop-common/src/main/java/com/goodsop/common/core` 目录
   - 创建 `goodsop-common/src/main/java/com/goodsop/common/swagger` 目录

2. 代码迁移：
   - Result类从 `goodsop-common-core` 迁移到 `goodsop-common`
   - 保持包路径 `com.goodsop.common.core.model`

3. 依赖合并：
   - 将原 `goodsop-common-core` 和 `goodsop-common-swagger` 的依赖合并到 `goodsop-common/pom.xml`
   - 包含Spring Boot基础依赖
   - 包含Knife4j接口文档依赖
   - 包含lombok和hutool工具类依赖

### 2.2 配置模块迁移
1. 配置文件迁移：
   - 创建 `goodsop-config/src/main/resources` 目录
   - 迁移 `application-dev.yml` 配置
   - 新增 `application-test.yml` 和 `application-prod.yml` 配置
   - 新增 `application.yml` 作为主配置（默认激活dev环境）

2. 依赖调整：
   - 简化依赖，仅保留配置相关的基础依赖
   - 添加Spring Boot配置处理器

## 3. 依赖关系更新
- 根pom.xml中移除对旧模块的引用：
  - 移除 `goodsop-common-core`
  - 移除 `goodsop-common-swagger`
  - 移除 `goodsop-config-dev/test/prod`
- 添加对新模块的引用：
  - 添加 `goodsop-common`
  - 添加 `goodsop-config`

## 4. 其他模块修改
- 更新 `goodsop-server/pom.xml`：
  - 将 `goodsop-config-dev` 依赖更改为 `goodsop-config`
- 更新 `goodsop-modules/goodsop-user/pom.xml`：
  - 将 `goodsop-common-core` 和 `goodsop-common-swagger` 依赖合并为 `goodsop-common`
- 更新 `goodsop-modules/goodsop-file/pom.xml`：
  - 将 `goodsop-common-core` 和 `goodsop-common-swagger` 依赖合并为 `goodsop-common`
- 更新 `goodsop-modules/goodsop-iot/pom.xml`：
  - 将 `goodsop-common-core` 和 `goodsop-common-swagger` 依赖合并为 `goodsop-common`

## 5. 注意事项
- 需要修改相关的import语句以匹配新的包结构
- 如果构建过程中出现依赖版本缺失的错误，可能需要重新执行Maven命令：`mvn clean install` 